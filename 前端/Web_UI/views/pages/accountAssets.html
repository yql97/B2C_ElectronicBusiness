<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>我的资产</title>
		<script type="text/javascript" src="../public/js/vue.min.js"></script>
		<script type="text/javascript" src="../public/js/axios.min.js"></script>
		<script src="../public/js/jQuery3.2.1.js"></script>
		<link type="text/css" rel="stylesheet" href="/public/css/base.css" />
		<link type="text/css" rel="stylesheet" href="/public/css/foot.css" />
		<link type="text/css" rel="stylesheet" href="/public/css/top.css" />
		<style>
			body{
				margin: 0;
				padding: 0;
			}
			ul{
				list-style: none;
				padding: 0;
			}
			a{
				text-decoration: none;
			}
			.ui-container {
    width: 1190px;
    margin: 0 auto;
}
.asset-breadcrumb {
    display: block;
    font-size: 14px;
    margin: 0 0 14px;
	overflow-x: hidden;
	padding-top: 10px;
}
.asset-breadcrumb li {
    float: left;
}
.asset-breadcrumb .asset-divider {
    margin: 0 7px 0 5px;
    font-size: 11px;
    color: #999999;
    vertical-align: 1px;
}
.asset-breadcrumb .asset-breadcrumb-active {
    color: #4D4D4D;
}
.ui-grid-25 {
    width: 1190px;
	margin: 0 10px 10px 0;
    float: left;
    display: inline;
}
.main-form {
	padding-top: 10px;
    min-height: 300px;
    padding: 0px 9px 9px 9px;
}
.ui-form-bg {
    background: #fff;
    padding-bottom: 70px;
}
.ui-form {
    font-size: 12px;
    line-height: 1.5;
}
.ui-form .fn-ml20 {
    margin-left: 20px;
}

.ui-form-item .ui-label {
    margin-left: -320px;
    width: 320px;
	line-height: 16px;
color: #4c4c4c;
font-size: 14px;
float: left;
margin-right: 10px;
padding-top: 7px;
text-align: right;
}
.ui-input:disabled, .ui-textarea:disabled {
    border: 1px solid #ccc;
    background: #f2f2f2;
}

.main-form .ui-form-item {
    padding: 15px 5px 10px 320px;
}
.main-form .ui-form-item .ui-label {
    margin-left: -320px;
    width: 320px;
}
.ui-label {
    line-height: 16px;
    color: #4c4c4c;
    font-size: 14px;
    float: left;
    margin-right: 10px;
    padding-top: 7px;
    text-align: right;
}
.ui-input {
    width: 170px;
    padding: 6px;
    height: 18px;
    line-height: 18px;
	}
	.ui-tiptext-container-message {
    background: #e5f5ff;
    border: 1px solid #c9d5e2;
}
.ui-button-lorange .ui-button-text {
    padding: 0 20px;
    background-position: right -177px;
    height: 35px;
	vertical-align: middle;
	background-color: orangered;
	border:1px solid rgb(230, 230, 230);
}
#submitBtn {
    margin-left: 10px;
	line-height: normal;
}
.i-banner-portrait{
display: inline;
float: left;
width: 86px;
}
.i-assets-content{
}
.i-assets-header {
	display: block;
	padding: 15px 30px;
    height: 29px;
	border-bottom: 1px solid #afbedf;
}
.i-assets-balance-amount {
    line-height: 24px;
    margin-right: 20px;
}
 .ui-button-swhite {
    border: 1px solid #afafaf;
    background-color: #f3f3f3;
    color: #777;
    line-height: 22px;
    height: 22px;
    font-size: 12px;
	padding: 0 9px;
}

.i-assets-balance-amount {
    line-height: 24px;
    margin-right: 20px;
	height: 40px;
	float: left;
	border: 1px solid #000000;
}
.i-assets-balance-actions{
	float: left;
	height: 40px;
	border: 1px solid #0033CC;
	margin: 0;
	
}
.i-assets-balance-actions li {
    float: left;
    margin-right: 7px;
    height: 25px;
}
.card-box-list {
    overflow: hidden;
    padding: 20px 0 0 30px;
}
.card-box-list .card-box {
    float: left;
    overflow: hidden;
    width: 265px;
    height: 160px;
    margin: 0 20px 20px 0;
    background: #EFF0F1;
    border-radius: 4px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    cursor: pointer;
    border: 1px solid #DDDDDD;
}
.card-box-list .card-box .card-box-name {
    border-radius: 4px 4px 0 0;
    height: 46px;
    position: relative;
}
.card-box-name .bank-logo {
    position: absolute;
    top: 13px;
    left: 12px;
}
.card-box-name .bank-name {
    position: absolute;
    top: 12px;
    left: 13px;
    overflow: hidden;
    width: 84px;
    text-overflow: ellipsis;
    white-space: nowrap;
}
.card-box-name .bank-num4 {
    position: absolute;
    top: 12px;
    right: 13px;
}
.add-card {
    float: left;
    width: 265px;
    margin: 0 17px 20px 0;
}
.add-card a{
    display: block;
    overflow: hidden;
    zoom: 1;
    height: 112px;
    padding: 48px 0 0 0;
    text-align: center;
    text-decoration: none;
    border-radius: 4px;
    font-weight: 700;
    border: 1px dashed #AACCDD;
    background: #FAFAFB;
    outline: none;
    cursor: pointer;
    -webkit-transition: all 0.15s ease-in;
    transition: all 0.15s ease-in;
}
.card-box-list .card-box .card-box-express {
    height:80px;
    margin: 0 0 5px 0;
    background: #CFD2D4;
    border-top: 1px solid #ABADAF;
}
.card-box-list .card-box .express-status {
    float: left;
    padding: 9px 0 0 10px;
}
.add-card .iconfont {
    display: block;
    margin: 0 auto;
    vertical-align: -5px;
    font-size: 30px;
    color: #A8B5C4;
    cursor: pointer;
	font-family: "rei";
font-style: normal;
font-weight: normal;
text-align: center;
}
.ui-tab-deposit-type {
    color: #666;
    padding: 10px 25px;
    margin: 12px 0 2px 0;
    border: 1px solid #d8dad9;
    background: #fff;
}
.ui-fm-item {
    padding: 0 5px 15px 170px;
		border: 1px solid #0033CC;
		}
		.ui-fm-label {
    float: left;
    width: 170px;
    text-align: right;
    font-size: 14px;
}
.ui-fm-row {
    border-bottom-color: #c6d5ee;
    padding-bottom: 20px;
}
.tb-inner{
	border: 1px solid #000000;
}
.tb-bank-intro {
    width: 500px;
		margin-bottom: 15px;
}
.tb-inner table {
    border-right: 1px solid #c8c8c8;
    border-bottom: 1px solid #c8c8c8;
    background: #fff;
}
.tb-inner caption {
    padding: 3px 0 5px 2px;
}
.tb-bank-intro thead th {
    vertical-align: middle;
    background: #e7e7e7;
    color: #000;
    border-top: 1px solid #c8c8c8;
    border-left: 1px solid #c8c8c8;
    padding: 3px 5px;
    font-family: Simsun;
		width: 50px;
}
.tb-inner td{
    border-top: 1px solid #c8c8c8;
    border-left: 1px solid #c8c8c8;
    padding: 3px 5px;
    font-family: Simsun;
}
.ui-input {
    padding: 7px 9px;
    line-height: 18px;
    border: 1px solid #c1c1c1;
}
.alieditContainer {
    display:block;
    width: 184px;
    height: 24px;
    position: relative;
		vertical-align: bottom;
		float: left;
}
.edit-link a {
    line-height: 24px;
		color: #0ae;
}
.withdraw-cnt {
    border: 1px solid #bcccf0;
    background: #fcfcfd;
    height: auto;
    width: 1190px;
		margin: 0 auto;
}
.withdraw-cnt-tit {
    padding: 15px 30px;
    height: 29px;
    background-repeat: repeat-x;
    background-position: 0 0;
    border-bottom: 1px solid #afbedf;
}
.withdraw-cnt-tit .title {
    float: left;
    display: inline-block;
    margin: 0;
    color: #4d4d4d;
    font: 700 18px/28px 微软雅黑;
}
.withdraw-cnt-tit .amount {
    float: left;
    display: inline-block;
    padding-left: 30px;
    line-height: 28px;
    font-size: 12px;
}
.withdraw-cnt-tit .link {
    float: right;
    height: 28px;
    line-height: 28px;
    font-size: 14px;
}
.withdraw-cnt-det {
    padding: 15px 15px;
}
.applay{
	margin-top: 20px;
}
.applay .ui-form-item {
    padding-left: 190px;
    padding-bottom: 35px;
		padding: 0 5px 15px 170px;
		}
		.applay .ui-form-item .ui-label {
    width: 160px;
    margin-left: -190px;
    font-size: 14px;
    padding-top:12px;
		float: left;
     text-align: right;
}
.choose {
    width: 745px;
    position: relative;
    min-height: 110px;
		margin-bottom: 50px;
}
.choose-list {
   /* position: absolute; */
    width: 731px;
    height: 32px;
    padding: 7px 6px;
		margin: 10px auto;
    border: 1px solid #ececec;
    border-radius: 3px 3px;
    background: #fcfcfd;
    left: 0;
    cursor: pointer;
}
.choose-list .b-raido {
    float: left;
    width: 20px;
    padding-left: 4px;
    height: 32px;
    line-height: 32px;
}
.choose-list .b-logo {
    float: left;
    margin-left: 5px;
    padding: 1px 0;
    width: 295px;
    height: 30px;
    line-height: 30px;
    color: #030303;
    font-size: 14px;
}
.choose-list .b-logo .bank {
    display: inline-block;
    float: left;
    line-height: 30px;
}
.choose-list .b-logo .num {
    display: inline-block;
    float: left;
    color: #363c47;
    line-height: 30px;
    padding-left: 10px;
}

.choose-list .b-time {
    float: left;
    width: 130px;
    height: 16px;
    line-height: 16px;
    padding: 8px 0;
}
.choose-list .b-amount {
    float: left;
    width: 190px;
    height: 18px;
    color: #9a9a9a;
    font-size: 12px;
    padding: 7px 0;
}
.bread-crumb {
	width: 1190px;
	margin: 0 auto;
    height: 60px;
    line-height: 60px;
    font-size: 14px;
}
.bread-crumb a {
    cursor: pointer;
    text-decoration: none;
    color: #999;
    max-width: 600px;
	    overflow: hidden;
    display: inline-block;
}
.bread-crumb span {
    overflow: hidden;
    display: inline-block;
}

.bread-crumb--arrow {
    font-family: simsun;
    font-size: 19px;
    font-weight: 300;
    margin: 0 10px;
    color: #999;
}
		</style>
	</head>
	<body>
	<div id="vuebody" style="width: auto;height: auto;">
		<div class="cover">
			<div class="site-nav">
				<div class="site-nav-bd">
					<ul class="site-nav-bd-l">
						<li>
							<div class="site-nav-menu-hd">
								<span class="site-nav-region">中国大陆</span>
							</div>
						</li>
						<li>
							<div class="site-nav-menu-hd">
								<div class="site-nav-sign"> <a href="login.html">亲，请登录</a> <a href="register.html">免费注册</a> </div>
								<div class="site-nav-user"> <a></a>
								</div>
							</div>
						</li>
						<li>
						</li>
					</ul>
					<ul class="site-nav-bd-r">
						<li>
							<div class="site-nav-menu-hd">
								<a href="/web_UI/">
									<span>首页</span>
								</a>
							</div>
							</li>
						<li>
							<div class="site-nav-menu-hd">
								<a href="browseHistory.html">
									<span>我的足迹</span>
								</a>
							</div>
							</li>
						<li>
							<div class="site-nav-menu-hd">
								<a id="mc-menu-hd" href="shoppingCart.html">
									<span>购物车</span>
								</a>
							</div>
						</li>
						<li>
							<div class="site-nav-menu-hd">
								<a href="favorites.html">
									<span>收藏夹</span>
								</a>
							</div>
						</li>
						<li>
							<div class="site-nav-menu-hd">
								<a href="user.html">
									<span>个人中心</span>
								</a>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</div>
		<div class="bread-crumb">
			<a href="" >我的账户</a>
			<span class="bread-crumb--arrow">&gt;</span><a>银行卡管理</a>
			<span class="bread-crumb--arrow">&gt;</span>
			<a href="" v-if="this.status==1" style="color: rgb(51, 51, 51);">添加银行卡</a>
			<a href=""  v-if="this.status==2" style="color: rgb(51, 51, 51);">提现</a>
			<a href=""  v-if="this.status==3" style="color: rgb(51, 51, 51);">充值</a>
	  </div>
		
		<div class="ui-container" style="display: block;border: 1px solid #bcccf0;background: #fcfcfd;" v-if="this.status==0">
				<div class="i-assets-container ui-bookblock-item" style="display: block;height: auto;border: 1px solid #e1e1e1;">
					<div class="i-assets-content">
						<div class="withdraw-cnt-tit">
							<h2 class="title">
								银行卡管理
							</h2>
						</div>
						<div style="clear: left; display: block;height:auto;">
							<div class="card-box-list">
								<div class="card-box" v-for="item in bankcard_list">
									<div class="card-box-name">
										<span class="bank-name" title="河南省农村信用社">{{item.bank_name}}</span>
										<span class="bank-num4">尾号：{{item.bank_card_code.substring(12,18)}}</span>
									</div>
									<div class="card-box-express">
										<div style="padding-left: 13px;padding-top: 5px;"><span style="margin-right: 150px;">快捷支付</span></span><span>已开通</span></div>
										<div style="padding-left: 13px;padding-top: 5px;">
											<p style="font-size: 12px;font-weight: 400;color: #666666;">银行预留手机：180****3726</p>
											<p style="font-size: 12px;font-weight: 400;color: #666666;">开通时间：2019.02.26</p>
										</div>
									</div>
									<div style="padding-left: 13px;">
										<!--background: #F3F3F3;-->
										<a href="" style="color: #0088cc;font-weight: 400;height: 19px;
										line-height: 19px;">解除绑定</a></div>
								</div>
								<div class="add-card">
									<a  href="accountAssets.html?status=1"><i class="iconfont">+</i>添加银行卡</a>
								</div>
							</div>
						</div>
					</div>
				</div>
		</div>
		<div style="display: block;  width: 1190px;margin:0 auto;height: 500px;border: 1px solid #bcccf0;background: #fcfcfd;" v-if="this.status==1">
			<div class="ui-grid-25">
				<div class="main-form">
					<div class="withdraw-cnt-tit">
						<h2 class="title">添加银行卡</h2>
						</div>
					<div class="ui-form-item" style="margin-top: 20px;">
						<label class="ui-label">真实姓名</label>
						<input id="J_CardHolderName" name="cardHolderName" :value="realName" disabled="" class="ui-input ui-input-pl10 ui-input-disable"> </div>
					<div class="ui-form-item">
						<label class="ui-label">身份证号</label>
						<input id="J_CertNo" name="certNo" :value="peopleCardNum" disabled="" class="ui-input ui-input-pl10 ui-input-disable">
					</div>
					<div class="ui-form-item ui-bank-con ui-form-item-error" style="z-index: 98;">
						<label for="J-bankid" class="ui-label">银行卡卡号</label>
						<input id="bankcardnum" class="ui-input ui-input-bankid J-input-zoom" type="text" @change="getBankName()">
					</div>
					<div class="ui-form-item ui-form-item-error" style="z-index: 98;">
						<label for="J-mobilenum" class="ui-label">所属银行</label>
						<input id="bankname" name="mobileNo" class="ui-input ui-input-pl10" disabled="" type="text" value="">
					</div>
					<div class="ui-form-item">
						<label class="ui-label">邮箱验证码</label>
						<input class="ui-input" id="code"/>
						<button style="display: inline-block;height: 32px;line-height: 32px;text-align: center;border: 1px solid #e6e6e6;
						background: #f5f5f5;vertical-align: middle;color: #5e5e5e;margin-left: 1px;padding: 0 8px;"
						 v-on:click="getCode()">获取验证码</button>
					</div>
					<div class="ui-form-item">
						<div id="submitBtn" class="ui-button ui-button-lorange">
							<input type="submit" v-on:click="bindBankCard()" class="ui-button-text" value="同意协议并确定">
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="withdraw-cnt" v-if="this.status==2">
			<div class="withdraw-cnt-tit fn-clear">
				<h2 class="title">提取余额到银行卡</h2>
				<p class="amount">余额：<span class="number">{{balance}}</span>元</p>
				<div class="link">
					<a class="add J-addBank" href="#" seed="link-add" smartracker="on" href="accountAssets.html?status=1">添加银行卡</a>
					<span class="ui-separator">|</span>
					<a href="" title="提现记录"  class="record" seed="link-record"
					 smartracker="on">提现记录</a>
				</div>
			</div>
			<div class="withdraw-cnt-det">
				<div class="applay">
						<div class="ui-form-item ui-form-item-bank" id="J-bankcard-item">
							<label class="ui-label">选择银行卡:</label>
							<div class="choose" >
								<div class="choose-list" style="z-index: 90;" v-for="(item,index) in bankcard_list">
									<div class="b-raido">
										<input type="radio" name="bankAccountId" v-if="index==0" checked="checked" :value="item.bank_card_code">
										<input type="radio" name="bankAccountId" v-if="index!=0" :value="item.bank_card_code">
									</div>
									<div class="b-logo">
										<div class="bank">
											<span class="icon icon-bank icon-cashier-HNRCU_s" data-id="HNRCU_s"></span>
											<span> {{item.bank_name}}</span>
										</div>
										<div class="num">
											尾号：<span>{{item.bank_card_code.substring(14,18)}}</span>
										</div>
									</div>
									<div class="b-time">
										<div class="ui-pentagon"><span class="ui-pentagon-text" data-text="预计次日到账">2小时</span></div>
									</div>
									<div class="b-amount">
										<span title="单笔50000.00元，单日无限额">单笔50000.00元，单日…</span>
									</div>
								</div>
						</div>
						<div class="ui-form-item ui-form-item-amount">
							<label class="ui-label" >提现金额:</label>
							<input name="totleFee" id="number" class="ui-input ui-input-140" placeholder="输入金额" >
							<span class="ui-form-other-yuan">元</span>
							<span id="J-fee" style="color:#ff5243;position:relative;top:1px;left:10px;"></span>
							<div class="ui-form-explain"></div>
						</div>
						<div class="ui-form-item ui-form-item-double                 
 ui-form-double  fn-clear " id="J-arrived-time">
							<input type="hidden" name="withdrawType" value="" id="J-account-time">
							<label for="" class="ui-label">到账时间:</label>
							<div style="padding-top: 10px;">
								<label>最快10分钟到账</label>
							</div>
						</div>
						<div class="ui-form-item">
							<label class="ui-label">支付密码:</label>
							<input type="password"  id="paypassword" class="ui-input " name="smsNO" placeholder="请输入支付密码">
							<div class="ui-form-explain"></div>
						</div>
						<div class="ui-form-item">
							<div class="ui-form-item-submit">
								<div class="ui-button">
									<input type="submit" v-on:click="withdraw()" value="完成">
								</div>
							</div>
						</div>
				</div>
			</div>
		</div>
		</div>
		<div class="withdraw-cnt" v-if="this.status==3">
					<div class="withdraw-cnt-tit fn-clear">
						<h2 class="title">账户充值</h2>
						<p class="amount">余额：<span class="number">{{balance}}</span>元</p>
						<div class="link">
							<a class="add J-addBank" href="accountAssets.html?status=3" seed="link-add" smartracker="on" >添加银行卡</a>
							<span class="ui-separator">|</span>
							<a href="https://lab.alipay.com:443/consume/record/draw.htm" title="提现记录" target="_blank" class="record" seed="link-record"
							 smartracker="on">充值记录</a>
						</div>
					</div>
					<div class="withdraw-cnt-det">
						<div class="applay">
								<div class="ui-form-item ui-form-item-bank">
									<label class="ui-label " >选择银行卡:</label>
									<div class="choose" id="J-choose" >
										<div class="choose-list " style="z-index: 90;" v-for="(item,index) in bankcard_list">
											<div class="b-raido">
												<input type="radio"  name="bankAccountId" v-if="index==0" checked="checked" :value="item.bank_card_code">
												<input type="radio"  name="bankAccountId" v-if="index!=0" :value="item.bank_card_code">
											</div>
											<div class="b-logo">
												<div class="bank">
													<span>{{item.bank_name}}</span>
												</div>
												<div class="num">
													尾号：<span>{{item.bank_card_code.substring(14,18)}}</span>
												</div>
												<div class="katong">
													<span>快捷</span>
												</div>
											</div>
											<div class="b-time">
												<div class="ui-pentagon"><span class="ui-pentagon-text" data-text="预计次日到账">2小时</span></div>
											</div>
											<div class="b-amount">
												<span title="单笔50000.00元，单日无限额">单笔50000.00元，单日…</span>
											</div>
										</div>
								</div>
								<div class="ui-form-item ui-form-item-amount">
									<label class="ui-label" for="amount">充值金额:</label>
									<input value="" name="totleFee" id="number" class="ui-input ui-input-140" placeholder="输入金额" >
									<span class="ui-form-other-yuan">元</span>
									<span id="J-fee" style="color:#ff5243;position:relative;top:1px;left:10px;"></span>
									<div class="ui-form-explain"></div>
								</div>	
								<div class="ui-form-item">
									<label class="ui-label">支付密码:</label>
									<input type="password"  id="paypassword" class="ui-input " name="smsNO" placeholder="请输入支付密码">
									<div class="ui-form-explain"></div>
								</div>				
								<div class="ui-form-item ui-form-submit">
									<div class="ui-form-item-submit">
										<div class="ui-button  ui-button-morange ">
											<input id="nextBtn" type="submit"  v-on:click="recharge()" value="确认" class="ui-button-text">
										</div>
									</div>
								</div>
							</form>
						</div>
					</div>
				</div>
				</div>
		<div id="Footer" style="min-height: 150px">
			<div class="footer">
				<div class="footer-hd">
					<p>
						<a href="">;;;;;</a>
						<b>|</b>
						<a href="">;;;;;</a>
						<b>|</b>
						<a href="">;;;;;</a>
						<b>|</b>
						<a href="">;;;;;</a>
						<b>|</b>
						<a href="">;;;;;</a>
						<b>|</b>
						<a href="">;;;;;</a>
						<b>|</b>
						<a href="">;;;;;</a>
						<b>|</b>
						<a href="">;;;;;</a>
						<b>|</b>
						<a href="">;;;;;</a>
						<b>|</b>
						<a href="">;;;;;</a>
						<b>|</b>
						<a href="">;;;;;</a>
						<b>|</b>
						<a href="">阿里云计算</a>
						<b>|</b>
					</p>
				</div>
				<div class="footer-bd">
					<p>
						<a href="">关于本站</a>
						<a href="">合作伙伴</a>
						<a href="">营销中心</a>
						<a href="">廉正举报</a>
						<a href="">联系客服</a>
						<a href="">开放平台</a>
						<a href="">诚征英才</a>
						<a href="">联系我们</a>
						<a href="">网站地图</a>
						<a href="">法律声明</a>
						<a href="">隐私权政策</a>
					</p>
					<p style="clear: left;">
						<em>© 2019 Maimai.com 版权所有</em>
						<span>网络文化经营许可证：浙网文[2016]0132-032号</span>
						<b>|</b>
						<span>增值电信业务经营许可证：浙B2-20080224-1</span>
						<b>|</b>
						<span>信息网络传播视听节目许可证：1109364号</span>
					</p>
				</div>
			</div>
		</div>
		</div>
	</body>
	
	<script type="text/javascript" src="../public/js/cookie.js"></script>
	<script type="text/javascript" src="../public/js/identificationBankType.js"></script>
<script type="text/javascript"><!--- 0 银行卡管理 1绑定银行卡 2提现 3 充值--->
	var status=-1;
	var vm = new Vue({
		el: '#vuebody',
		data: {
	        status:0,
					user:null,
					bankcard_list:null,
					balance:0,
					realName:"",
					peopleCardNum:""
		},
		created: function() {
		UrlSearch();
		console.log(status);
		this.status=status;
		this.getLoginUser();
		this.getBindBankCardList();
		this.getUserAccount();
		this.getUserAuthInfo();
		},
		methods: {
			bindBankCard(){
				var bankcardnum=$("#bankcardnum").val();
				var bankname=$("#bankname").val();
				var code=$("#code").val();
				console.log(bankcardnum);
				console.log(bankname);
				console.log(code);
				var params = new URLSearchParams();
				params.append("bank_name",bankname);
				params.append("bank_card_code",bankcardnum);
				params.append("code",code);
				axios.post('http://127.0.0.1:8080/ECS_User/bindingBankCard.action',params,{headers:{
					withCredentials:true,
					"Authorization":cookie.get("JSESSIONID")
				}}).then(function (response) {
						console.log(response.data);
						if(response.data.result_object=="成功"){
							alert("添加成功");
						}
				}).catch(function (error) {
					console.log(error);
				});	
			},
			getBindBankCardList(){
				var self=this;
				axios.get('http://127.0.0.1:8080/ECS_User/getBankCardList.action',{headers:{
					withCredentials:true,
					"Authorization":cookie.get("JSESSIONID")
				}}).then(function (response) {
						console.log(response.data);
						self.bankcard_list=response.data.result_object;
				}).catch(function (error) {
					console.log(error);
				}); 
			},
			withdraw(){//提现
			var bankcardnum=$("input[name='bankAccountId']:checked").val();
		   var  num=$("#number").val();
			 var password=$("#paypassword").val();
				var params = new URLSearchParams();
				params.append("bankCard_code",bankcardnum);
				params.append("paypassword",password);
				params.append("number",num);
				axios.post('http://127.0.0.1:8080/ECS_User/withdrawAccount.action',params,{headers:{
					withCredentials:true,
					"Authorization":cookie.get("JSESSIONID")
				}}).then(function (response) {
						console.log(response.data);
						if(response.data.result_object=="成功"){
							alert("提现成功");
						}
						if(response.data.result_object=="余额不足"){
							alert("余额不足");
						}
						if(response.data.result_object=="密码错误"){
							alert("密码错误");
						}
				}).catch(function (error) {
					console.log(error);
				});	
			},
			recharge(){//充值
			var bankcardnum=$("input[name='bankAccountId']:checked").val();
			var  num=$("#number").val();
			var password=$("#paypassword").val();
				var params = new URLSearchParams();
				params.append("bankCard_code",bankcardnum);
				params.append("paypassword",password);
				params.append("number",num);
				axios.post('http://127.0.0.1:8080/ECS_User/rechargeAccount.action',params,{headers:{
					withCredentials:true,
					"Authorization":cookie.get("JSESSIONID")
				}}).then(function (response) {
						console.log(response.data);
						if(response.data.result_object=="成功"){
							alert("充值成功");
						}
						if(response.data.result_object=="余额不足"){
							alert("余额不足");
						}
						if(response.data.result_object=="密码错误"){
							alert("密码错误");
						}
				}).catch(function (error) {
					console.log(error);
				});	
			},
			getCode(){
				var self=this;
				axios.get('http://127.0.0.1:8080/ECS_User/getCode.action',{
					params:{
						"mail":self.user.mailnumber
					}
				}).then(function(response) {
						console.log(response);
						if(response.data.result_object=="成功"){
							console.log("获取验证码成功");
						}
					}).catch(function(error) {
						console.log(error);
					});
			},	
			getLoginUser(){
				var self=this;
				axios.get('http://127.0.0.1:8080/ECS_User/getLoginUser.action',{headers:{
					withCredentials:true,
					"Authorization":cookie.get("JSESSIONID")
				}}).then(function (response) {
						console.log(response.data.result_object);
						self.user=response.data.result_object;
				}).catch(function (error) {
					console.log(error);
				}); 
			},
		getUserAccount(){
			var self=this;
			axios.get('http://127.0.0.1:8080/ECS_User/getUserAccount.action',{headers:{
				withCredentials:true,
				"Authorization":cookie.get("JSESSIONID")
			}}).then(function (response) {
					console.log(response.data);
					self.balance=response.data.result_object.balance;
			}).catch(function (error) {
				console.log(error);
			}); 
		},
		getUserAuthInfo(){
			var self=this;
			axios.get('http://127.0.0.1:8080/ECS_User/getAuthInfo.action',{headers:{
				withCredentials:true,
				"Authorization":cookie.get("JSESSIONID")
			}}).then(function (response) {
					console.log(response.data);
					self.realName=response.data.result_object.real_name;
					self.peopleCardNum=response.data.result_object.people_card_num;
			}).catch(function (error) {
				console.log(error);
			}); 
		},
			getBankName(){
				var num=$("#bankcardnum").val();
			 var data=bankCardAttribution(num);
			   $("#bankname").val(data.bankName);
			}
		}
	});
	function UrlSearch() {
		var str=location.href; //取得整个地址栏
		var num=str.indexOf("?")
		str=str.substr(num+1); //取得所有参数   stringvar.substr(start [, length ]
		var arr=str.split("&"); //各个参数放到数组里
		//  console.log(arr)
		for(var i=0;i < arr.length;i++){
					num=arr[i].indexOf("=");
					if(num>0){
							name=arr[i].substring(0,num);
							value=arr[i].substr(num+1);
							if(name=="status") this.status=value;
					}
		}
			}		
</script>
</html>
