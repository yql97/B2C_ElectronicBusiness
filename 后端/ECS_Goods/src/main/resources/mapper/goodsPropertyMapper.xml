<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="ECS_Goods.mapper.goodsPropertyMapper">
<sql id="GoodsProperty">
select goods_sku.goods_sku_id,goods_property_relate.goods_property_relate_id,
goods_property_name.property_name_text,goods_property_value.property_value
from goods_sku,goods_property_relate,goods_property_name,goods_property_value
where goods_property_relate.goods_sku_id=goods_sku.goods_sku_id
and goods_property_name.property_name_id=goods_property_relate.goods_property_name_id
and goods_property_value.property_value_id=goods_property_relate.goods_property_value_id
</sql>

<insert id="addGoodsProperty" parameterType="ECS_Common.entity.goodsPropertyName">
  insert into goods_property_name(property_name_id,goods_category_id,property_name_text)
  <trim prefix="values(" suffix=")" suffixOverrides="," >
      <if test="propertyName_id !=null">
      #{propertyName_id,jdbcType=INTEGER},
      </if>
      <if test="goodsCategory_id !=null">
      #{goodsCategory_id,jdbcType=INTEGER},
      </if>
      <if test="propertyName_text !=null">
      #{propertyName_text,jdbcType=INTEGER},
      </if>
      </trim> 
</insert>

<insert id="addPropertyValue" parameterType="ECS_Common.entity.goodsPropertyValue" >
  insert into goods_property_value(property_value_id,goods_property_name_id,property_value)
  <trim prefix="values(" suffix=")" suffixOverrides="," >
      <if test="propertyValue_id !=null">
      #{propertyValue_id,jdbcType=INTEGER},
      </if>
      <if test="propertyName_id !=null">
      #{propertyName_id,jdbcType=INTEGER},
      </if>
      <if test="propertyValue_text !=null">
      #{propertyValue_text,jdbcType=VARCHAR},
      </if>
      </trim> 
</insert>

<insert id="addPropertyRelate" parameterType="ECS_Common.entity.goodsPropertyRelate"
 useGeneratedKeys="true">
     insert into goods_property_relate(goods_sku_id,goods_property_name_id,
     goods_property_value_id)
     <trim prefix="values(" suffix=")" suffixOverrides=",">
      <if test="goods_sku_id !=null">
      #{goods_sku_id,jdbcType=INTEGER},
      </if>
      <if test="propertyName_id !=null">
      #{propertyName_id,jdbcType=INTEGER},
      </if>
      <if test="propertyValue_id !=null">
      #{propertyValue_id,jdbcType=INTEGER}
      </if>
      </trim> 
</insert>
</mapper>